# Byte-Battle

Byte-Battle — это онлайн-платформа, где программисты могут доказывать, кто быстрее решает алгоритмические задачи. В
дуэльном режиме двум участникам выдаётся одна задача — кто первым её решает, получает очки и сразу получает следующую.
Побеждает быстрый и сообразительный.

Для тех, кто хочет соло-практику, есть режим на время: сам выбираешь старт и набор задач, а система фиксирует твой
результат для сравнения с другими. Такой формат помогает готовиться к собеседованиям — учит думать под давлением времени
и стресса.

Byte-Battle — это не просто кодинг, а азартные и полезные баттлы, идеально подходящие для учёбы, соревнований с друзьями
или быстрого роста как инженера.

## Цели проекта Byte-Battle:

- Реализовать онлайн-дуэли для решения алгоритмических задач на скорость.
- Ввести режим индивидуальных тайм-трейлов для самостоятельной практики.
- Автоматизировать проверку решений и начисление очков.
- Создать систему рейтинга пользователей.
- Сделать удобный и простой интерфейс.

## Задачи проекта Byte-Battle:

- Разработать серверную часть с автоматической проверкой решений.
- Реализовать фронтенд для дуэлей и соло-режима.
- Сделать систему регистрации, профилей и рейтинга.
- Настроить хранение и выборку задач.
- Обеспечить быстрый матчмейкинг для дуэлей.
- Внедрить таймеры и учёт времени прохождения.
- Организовать логику начисления очков и отображения результатов.

## Начало работы

Эти инструкции помогут вам запустить копию проекта на вашей локальной машине.

### Предварительные требования

- Go 1.16 или выше
- Git
- PostgreSQL 12 или выше

### Установка

1. Клонируйте репозиторий:
   ```bash
   git clone <repository-url>
   cd bytebattle
   ```
2. Инициализировать репозиторий с зависимостями

```
make init
make tidy
```

3. Установить colima + Docker (для того чтобы поднять базу)

TODO: дописать инструкцию для того чтобы это делать на Linux

```
brew install colima docker docker-compose
```

Поднять движок колимы чтобы база стартанула без докера десктопа

```
colima start
```

и поднять саму базу

```
docker-compose up -d
```

4. Накатить модели которые генерируются Boil'ом

А также нужно перед этим установить `sqlboiler` в PATH.

Как это должно быть:

```
turbomuza@MacBook-Pro-Muzaffar Byte-Battle % sqlboiler --version
SQLBoiler v4.19.7
```

```
make generate
```

5. Запустить сервер

```
make build
make run
```

6. Попробовать пострелять в запущенный сервер

```
curl -X GET localhost:8080/internal/hello_world
```

## Конечные точки API

- `GET /` - Приветственное сообщение
- `GET /internal/hello_world` - JSON ответ Hello World с интеграцией базы данных
- `POST /migrate` - Запуск миграций базы данных (доступно через командную строку)

## Конфигурация базы данных

Приложение использует PostgreSQL в качестве базы данных. Чтобы настроить подключение к базе данных, создайте файл `.env`
в корневой директории со следующими переменными:

```env
DB_HOST=localhost
DB_PORT=5432
DB_USER=bytebattle
DB_PASSWORD=bytebattle
DB_NAME=bytebattle
```

## Конфигурация SQLBoiler

Для генерации моделей SQLBoiler требуется файл конфигурации `sqlboiler.toml`.
Скопируйте пример файла:

```bash
cp sqlboiler.toml.example sqlboiler.toml
```

Затем обновите `sqlboiler.toml` своими учетными данными базы данных.
Этот файл не должен быть закоммичен в репозиторий, так как содержит чувствительную информацию.

## Схема базы данных

Приложение использует следующие таблицы базы данных:

- `users`: Хранит информацию о пользователях (id, username, email, password_hash, rating, created_at, updated_at)
- `problems`: Содержит задачи по программированию (id, title, description, difficulty, time_limit, memory_limit,
  created_at, updated_at)
- `duels`: Отслеживает дуэли между пользователями (id, player1_id, player2_id, problem_id, winner_id, status,
  started_at, completed_at, created_at, updated_at)
- `solutions`: Хранит отправленные решения (id, user_id, problem_id, duel_id, code, language, status, execution_time,
  memory_used, created_at, updated_at)

## Built With

- [Go](https://golang.org/) - Programming language
- [Echo](https://echo.labstack.com/) - Web framework
- [PostgreSQL](https://www.postgresql.org/) - Database
- [SQLBoiler](https://github.com/volatiletech/sqlboiler) - ORM
